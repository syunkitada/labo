# memo

## LSB が失敗する

- Linux Standard Base (LSB)
- 複数の Linux ディストリビューションの共同プロジェクトであり、Linux Foundation を活動母体として Linux 系オペレーティングシステムの内部構造の標準化を行うものである。

```
[    3.632016] cloud-init[602]: Cloud-init v. 18.5 running 'init-local' at Sat, 24 Jul 2021 02:51:40 +0000. Up 3.61 seconds.
[  OK  ] Started Initial cloud-init job (pre-networking).
[  OK  ] Reached target Network (Pre).
Starting LSB: Bring up/down networking...
[   ***] A start job is running for LSB: Bri...p/down networking (9s / 5min 1s)[   12.568929] random: crng init done
[     *] A start job is running for LSB: Bri... networking (3min 56s / 5min 1s)
[*
[FAILED] Failed to start LSB: Bring up/down networking.
See 'systemctl status network.service' for details.
Starting Initial cloud-init job (metadata service crawler)...
[  OK  ] Reached target Network.
Starting Dynamic System Tuning Daemon...
Starting Postfix Mail Transport Agent...
[  OK  ] Started Dynamic System Tuning Daemon.
[  304.183018] cloud-init[816]: Cloud-init v. 18.5 running 'init' at Sat, 24 Jul 2021 02:56:41 +0000. Up 304.15 seconds.
...
```

```
-bash-4.2$ systemctl status network.service
● network.service - LSB: Bring up/down networking
   Loaded: loaded (/etc/rc.d/init.d/network; bad; vendor preset: disabled)
   Active: failed (Result: exit-code) since 土 2021-07-24 03:30:51 UTC; 12s ago
     Docs: man:systemd-sysv-generator(8)
  Process: 8946 ExecStart=/etc/rc.d/init.d/network start (code=exited, status=1/FAILURE)
   CGroup: /system.slice/network.service
           └─2032 /sbin/dhclient -q -lf /var/lib/dhclient/dhclient--eth0.lease -pf /var/run/dhclient-eth0.pid eth0
```

```
$ sudo cat /var/log/anaconda/ifcfg.log
09:05:12,734 DEBUG ifcfg: content of files (network initialization):
09:05:12,734 DEBUG ifcfg: /etc/sysconfig/network-scripts/ifcfg-eth0:
09:05:12,735 DEBUG ifcfg:   # Generated by dracut initrd
09:05:12,735 DEBUG ifcfg:   NAME="eth0"
09:05:12,735 DEBUG ifcfg:   HWADDR="52:54:00:e0:d5:08"
09:05:12,735 DEBUG ifcfg:   ONBOOT=yes
09:05:12,735 DEBUG ifcfg:   NETBOOT=yes
09:05:12,736 DEBUG ifcfg:   UUID="ee75ada8-06b6-451d-9c18-d1d4ce825217"
09:05:12,736 DEBUG ifcfg:   IPV6INIT=yes
09:05:12,736 DEBUG ifcfg:   BOOTPROTO=dhcp
09:05:12,736 DEBUG ifcfg:   TYPE=Ethernet
09:05:12,747 DEBUG ifcfg: all settings: [{'802-3-ethernet': {'auto-negotiate': False, 'mac-address-blacklist': [], 's390-options': {}, 'mac-address': [82, 84,]
09:05:12,877 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:12,878 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:12,878 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:12,879 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:12,978 DEBUG ifcfg: content of files (kickstart pre section applied for devices ['eth0']):
09:05:12,979 DEBUG ifcfg: /etc/sysconfig/network-scripts/ifcfg-eth0:
09:05:12,979 DEBUG ifcfg:   # Generated by dracut initrd
09:05:12,979 DEBUG ifcfg:   NAME=eth0
09:05:12,979 DEBUG ifcfg:   HWADDR=52:54:00:E0:D5:08
09:05:12,979 DEBUG ifcfg:   ONBOOT=no
09:05:12,979 DEBUG ifcfg:   NETBOOT=yes
09:05:12,979 DEBUG ifcfg:   UUID=ee75ada8-06b6-451d-9c18-d1d4ce825217
09:05:12,979 DEBUG ifcfg:   IPV6INIT=yes
09:05:12,979 DEBUG ifcfg:   BOOTPROTO=dhcp
09:05:12,979 DEBUG ifcfg:   TYPE=Ethernet
09:05:12,979 DEBUG ifcfg:   PROXY_METHOD=none
09:05:12,980 DEBUG ifcfg:   BROWSER_ONLY=no
09:05:12,980 DEBUG ifcfg:   DEFROUTE=yes
09:05:12,980 DEBUG ifcfg:   IPV4_FAILURE_FATAL=no
09:05:12,980 DEBUG ifcfg:   IPV6_AUTOCONF=yes
09:05:12,980 DEBUG ifcfg:   IPV6_DEFROUTE=yes
09:05:12,980 DEBUG ifcfg:   IPV6_FAILURE_FATAL=no
09:05:12,991 DEBUG ifcfg: all settings: [{'802-3-ethernet': {'auto-negotiate': False, 'mac-address-blacklist': [], 's390-options': {}, 'mac-address': [82, 84,]
09:05:13,064 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:13,065 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:13,066 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:13,066 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:13,134 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:13,135 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:13,136 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:13,136 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:13,137 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:13,138 DEBUG ifcfg: IfcfgFile.set /etc/sysconfig/network-scripts/ifcfg-eth0: (('ONBOOT', 'yes'),)
09:05:13,139 DEBUG ifcfg: IfcfgFile.write /etc/sysconfig/network-scripts/ifcfg-eth0:
# Generated by dracut initrd
NAME="eth0"
HWADDR="52:54:00:E0:D5:08"
ONBOOT="yes"
NETBOOT="yes"
UUID="ee75ada8-06b6-451d-9c18-d1d4ce825217"
IPV6INIT="yes"
BOOTPROTO="dhcp"
TYPE="Ethernet"
PROXY_METHOD="none"
BROWSER_ONLY="no"
DEFROUTE="yes"
IPV4_FAILURE_FATAL="no"
IPV6_AUTOCONF="yes"
IPV6_DEFROUTE="yes"
IPV6_FAILURE_FATAL="no"

09:05:13,149 DEBUG ifcfg: content of files (real kickstart ONBOOT value set for devices ['eth0']):
09:05:13,149 DEBUG ifcfg: /etc/sysconfig/network-scripts/ifcfg-eth0:
09:05:13,149 DEBUG ifcfg:   # Generated by dracut initrd
09:05:13,149 DEBUG ifcfg:   NAME="eth0"
09:05:13,149 DEBUG ifcfg:   HWADDR="52:54:00:E0:D5:08"
09:05:13,149 DEBUG ifcfg:   ONBOOT="yes"
09:05:13,149 DEBUG ifcfg:   NETBOOT="yes"
09:05:13,149 DEBUG ifcfg:   UUID="ee75ada8-06b6-451d-9c18-d1d4ce825217"
09:05:13,149 DEBUG ifcfg:   IPV6INIT="yes"
09:05:13,149 DEBUG ifcfg:   BOOTPROTO="dhcp"
09:05:13,149 DEBUG ifcfg:   TYPE="Ethernet"
09:05:13,150 DEBUG ifcfg:   PROXY_METHOD="none"
09:05:13,150 DEBUG ifcfg:   BROWSER_ONLY="no"
09:05:13,150 DEBUG ifcfg:   DEFROUTE="yes"
09:05:13,150 DEBUG ifcfg:   IPV4_FAILURE_FATAL="no"
09:05:13,150 DEBUG ifcfg:   IPV6_AUTOCONF="yes"
09:05:13,150 DEBUG ifcfg:   IPV6_DEFROUTE="yes"
09:05:13,150 DEBUG ifcfg:   IPV6_FAILURE_FATAL="no"
09:05:13,156 DEBUG ifcfg: all settings: [{'802-3-ethernet': {'auto-negotiate': False, 'mac-address-blacklist': [], 's390-options': {}, 'mac-address': [82, 84,]
09:05:14,612 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:14,613 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:14,613 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
09:05:14,614 DEBUG ifcfg: IfcfFile.read /etc/sysconfig/network-scripts/ifcfg-eth0
```
